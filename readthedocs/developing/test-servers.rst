================
Тестовые сервера
================


Чтобы запустить Telethon на тестовом сервере, используйте следующий код:

.. code-block:: python

    client = TelegramClient(None, api_id, api_hash)
    client.session.set_dc(dc_id, '149.154.167.40', 80)

Вы можете посмотреть свой ``'test ip'`` на https://my.telegram.org.

Вы должны установить session на `None`, чтобы гарантировать, что вы генерируете
для неё новый ключ авторизации (код не будет работать, если вы используете сессию,
в которой вы ранее подключались к другому центру обработки данных).

Обратите внимание, что порт 443 может не работать, поэтому вы можете попробовать
вместо него 80.

Как только вы подключитесь, вам, скорее всего, будет предложено
войти в систему или зарегистрироваться.
Запомните, `кто угодно имеет доступ к выбранному вами телефону
 <https://core.telegram.org/api/datacenter#testing-redirects>`__,
так что не храните там важную информацию.

Правильные номера: ``99966XYYYY``, где ``X`` это ``dc_id`` и
``YYYY`` - любой номер, который вы хотите, например, ``1234`` и ``dc_id = 2`` это
``9996621234``. Код, отправленный Telegram, будет ``dc_id``, повторенный 5 раз.
В этом случае, ``22222``, так что мы можем захардкодить это:

.. code-block:: python

    client = TelegramClient(None, api_id, api_hash)
    client.session.set_dc(2, '149.154.167.40', 80)
    client.start(
        phone='9996621234', code_callback=lambda: '22222'
    )
